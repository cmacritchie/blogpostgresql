[{"/Users/craigmacritchie/Software/blogPostGresQL/client/src/index.js":"1","/Users/craigmacritchie/Software/blogPostGresQL/client/src/App.js":"2","/Users/craigmacritchie/Software/blogPostGresQL/client/src/reducers/index.js":"3","/Users/craigmacritchie/Software/blogPostGresQL/client/src/pages/Signup.js":"4","/Users/craigmacritchie/Software/blogPostGresQL/client/src/components/NavBar.js":"5","/Users/craigmacritchie/Software/blogPostGresQL/client/src/pages/Home.js":"6","/Users/craigmacritchie/Software/blogPostGresQL/client/src/actions/userActions.js":"7","/Users/craigmacritchie/Software/blogPostGresQL/client/src/pages/Login.js":"8","/Users/craigmacritchie/Software/blogPostGresQL/client/src/pages/NewArticle.js":"9","/Users/craigmacritchie/Software/blogPostGresQL/client/src/HOC/protectedRoute.js":"10","/Users/craigmacritchie/Software/blogPostGresQL/client/src/reducers/blogReducer.js":"11","/Users/craigmacritchie/Software/blogPostGresQL/client/src/reducers/userReducer.js":"12","/Users/craigmacritchie/Software/blogPostGresQL/client/src/components/Credentials.js":"13","/Users/craigmacritchie/Software/blogPostGresQL/client/src/actions/blogActions.js":"14"},{"size":648,"mtime":1611969313078,"results":"15","hashOfConfig":"16"},{"size":1097,"mtime":1611969313075,"results":"17","hashOfConfig":"16"},{"size":199,"mtime":1611969313081,"results":"18","hashOfConfig":"16"},{"size":966,"mtime":1611969313080,"results":"19","hashOfConfig":"16"},{"size":1070,"mtime":1611969313078,"results":"20","hashOfConfig":"16"},{"size":2778,"mtime":1611969313079,"results":"21","hashOfConfig":"16"},{"size":1588,"mtime":1611969313077,"results":"22","hashOfConfig":"16"},{"size":922,"mtime":1611969313079,"results":"23","hashOfConfig":"16"},{"size":2535,"mtime":1611969313080,"results":"24","hashOfConfig":"16"},{"size":582,"mtime":1611969313076,"results":"25","hashOfConfig":"16"},{"size":910,"mtime":1611969313081,"results":"26","hashOfConfig":"16"},{"size":831,"mtime":1611969313082,"results":"27","hashOfConfig":"16"},{"size":2278,"mtime":1611969313077,"results":"28","hashOfConfig":"16"},{"size":1672,"mtime":1611969313076,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"19xnef2",{"filePath":"33","messages":"34","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"32"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"40","usedDeprecatedRules":"32"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"32"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"32"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"32"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"32"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"32"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"32"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"32"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"/Users/craigmacritchie/Software/blogPostGresQL/client/src/index.js",[],["69","70"],"/Users/craigmacritchie/Software/blogPostGresQL/client/src/App.js",["71","72","73"],"import React, { useEffect } from 'react'\n\nimport { HashRouter, Router,  Route } from 'react-router-dom';\nimport Cookie from 'js-cookie'\nimport { useDispatch } from \"react-redux\";\nimport NavBar from './components/NavBar'\n\nimport Home from './pages/Home'\nimport Login from './pages/Login'\nimport Signup from './pages/Signup'\nimport NewArticle from './pages/NewArticle'\nimport protectedRoute from './HOC/protectedRoute'\n\nimport { getMe } from './actions/userActions'\nimport { createBrowserHistory } from 'history';\nexport const history = createBrowserHistory()\n// export let history = createBrowserHistory();\n\n\n\nfunction App() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getMe())\n  })\n\n  return (\n    <HashRouter >\n      <NavBar />\n      <Route exact path=\"/\" component={Home} />\n      <Route exact path=\"/login\" component={Login} />\n      <Route path=\"/sign-up\" component={Signup} />\n      <Route exact path=\"/post-article\" component={NewArticle} />\n      <Route exact path=\"/post-article/:articleid\" component={NewArticle} />\n    </HashRouter>\n  );\n}\n\nexport default App;\n","/Users/craigmacritchie/Software/blogPostGresQL/client/src/reducers/index.js",[],"/Users/craigmacritchie/Software/blogPostGresQL/client/src/pages/Signup.js",["74"],"import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Credentials from '../components/Credentials'\nimport { registerUser, failAcknowledge } from '../actions/userActions'\nimport { useHistory } from \"react-router-dom\";\n\nconst Signup = () => {\n    const history = useHistory();\n    const dispatch = useDispatch()\n    const user = useSelector((state) => state.user)\n    \n\n    useEffect(() => {\n        return () => { \n            if(user.loginError) {\n                dispatch(failAcknowledge()) \n            }\n        }\n    },[])\n\n    const submit = (info) => {\n        dispatch(registerUser(info, history))\n    }\n\n    return(\n        <div className='login-wrapper'>\n            <h1> Sign Up</h1>\n            <Credentials onSubmit={submit} email={true} />\n            {(user.loginError && !user.failAcknowledge) &&\n                <h1>Failed to Login User</h1>\n            }\n        </div>\n    )\n}\n\nexport default Signup","/Users/craigmacritchie/Software/blogPostGresQL/client/src/components/NavBar.js",["75"],"import React from 'react'\nimport { NavLink } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux'\nimport { logout } from '../actions/userActions'\nimport { useHistory } from \"react-router-dom\";\n\nconst NavBar = () => {\n    const history = useHistory();\n    const user = useSelector((state) => state.user)\n    const dispatch = useDispatch()\n\n    return(\n    <div className=\"nav-bar-wrapper\">\n        <ul className=\"nav-bar\">\n            <li><NavLink to='/'>Home</NavLink></li>\n            {!user.isAuthenticated &&\n            <>\n                <li><NavLink to='/login'>Login</NavLink></li>\n                <li><NavLink to='/sign-up'>Signup</NavLink></li>\n            </>\n            }\n            {user.isAuthenticated &&\n            <>\n                <li><NavLink to='/post-article'>New Article</NavLink></li>\n                <li><a onClick={()=> dispatch(logout(history))}>Logout</a></li>\n                <li><span>Welcome {user.userInfo.name}</span></li>\n            </>\n            }\n        </ul>\n    </div>\n    )\n}\n\nexport default NavBar","/Users/craigmacritchie/Software/blogPostGresQL/client/src/pages/Home.js",["76","77"],"import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getArticles, deleteArticle} from '../actions/blogActions'\nimport { NavLink } from 'react-router-dom';\nimport moment from 'moment'\n\nconst Home = () => {\n    const dispatch = useDispatch()\n    const {user, blog} = useSelector(({blog, user}) => { \n        return { blog, user }\n    })\n\n    useEffect(() => {\n        if(!blog.loaded) {\n            dispatch(getArticles())\n        }\n    },[blog.loaded])\n\n    if(!blog.loaded) {\n        return <div className=\"blog-posts\">Loading...</div>\n    }\n\n    if(blog.articles.length === 0) {\n        return <div className=\"blog-posts\">No Blog Posts.</div>\n    }\n    \n    if(blog.articles.length > 0) {\n        return (\n        <div className=\"blog-posts\">\n                {blog.articles.map(article => {\n                    return (\n                        <div key={`article_${article.id}`} className=\"article\">\n                            <h3 className=\"article-title\">{article.title}</h3>\n                            <div className=\"article-info\">\n                                <div>\n                                    <span>author: {article.User.name}</span>\n                                    &nbsp;\n                                    &nbsp;\n                                    <span> created: {moment(article.createdAt).format('YYYY-MM-DD')}</span>\n                                </div>\n                                {(user.isAuthenticated && (article.UserId === user.userInfo.id)) &&\n                                <div>\n                                    <button><NavLink to={`/post-article/${article.id}`}>Edit</NavLink></button>\n                                    <button onClick={()=>dispatch(deleteArticle(article.id))}>DELETE</button>\n                                </div>\n                                }\n                            </div>\n                            <br />\n                            {article.imageUrl &&\n                            <>\n                                {/* <img src={`/api/blogpost/1/avatar`} />  */}\n                                {/* This is an alternative if the article had the image */}\n                                <img src={`data:image/jpg;base64, ${Buffer.from(article.imageUrl.data).toString('base64')}`} />\n                            </>\n                            }\n                            {/* The below works too: */}\n                            {/* <img src={`/api/blogpost/1/avatar`} /> */}\n                            <p className=\"article-content\">{article.content}</p>\n                        </div>\n                    )\n                })\n                }\n        </div>\n        )\n    }\n\n    return <h1>What's going on?</h1>\n}\n\nexport default Home","/Users/craigmacritchie/Software/blogPostGresQL/client/src/actions/userActions.js",["78"],"import axios from 'axios'\n\n\nexport const UserActionTypes = { \n    LOGIN_SUCCESS: 'LOGIN_SUCCESS',\n    LOGIN_FAIL: 'LOGIN_FAIL',\n    REGISETER_USER: 'REGISTER_USER',\n    LOGOUT: 'LOGOUT',\n    FAIL_ACKNOWLEDGE: 'FAIL_ACKNOWLEDGE'\n}\n\nexport const getMe = () => async dispatch => {\n\n    try{\n        const res = await axios.get('/api/me')\n        dispatch({\n            type: UserActionTypes.LOGIN_SUCCESS,\n            payload: res.data\n        })\n    \n    } catch (e) {\n        console.log(e)\n    }\n}\n\nexport const registerUser = (newUser, history) => async dispatch => {\n    try{\n        const res = await axios.post('/api/user', newUser);\n        dispatch({\n            type: UserActionTypes.REGISETER_USER,\n            payload: res.data\n        })\n        history.push('/')\n    } catch (e) {\n        dispatch({ type: UserActionTypes.LOGIN_FAIL })\n    }\n}\n\nexport const loginUser = (credentials, history) => async dispatch => {\n    try{\n        const res = await axios.post('/api/login', credentials)\n        dispatch({\n            type: UserActionTypes.LOGIN_SUCCESS,\n            payload: res.data\n        })\n        history.push('/')\n    } catch (e) {\n        dispatch({ type: UserActionTypes.LOGIN_FAIL })\n    }\n}\n\nexport const logout = (history) => async dispatch => {\n    try {\n        const res = await axios.post('/api/logout')\n        dispatch({ type: UserActionTypes.LOGOUT })\n        history.push('/')\n    } catch (e) {\n        console.log(e)\n    }\n}\n\nexport const failAcknowledge = () => async dispatch => {\n    dispatch({\n        type: UserActionTypes.FAIL_ACKNOWLEDGE\n    })\n}","/Users/craigmacritchie/Software/blogPostGresQL/client/src/pages/Login.js",["79"],"import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Credentials from '../components/Credentials'\nimport { loginUser, failAcknowledge } from '../actions/userActions'\nimport { useHistory } from \"react-router-dom\";\n\nconst Login = () => {\n    const history = useHistory();\n    const dispatch = useDispatch()\n    const user = useSelector((state) => state.user)\n    \n\n    useEffect(() => {\n        return () => { \n            if(user.loginError) {\n                dispatch(failAcknowledge()) \n            } \n        }\n    },[])\n\n    const submit = (info) => {\n        dispatch(loginUser(info, history))\n    }\n\n    return(\n        <div className='login-wrapper'>\n        <h1>Login</h1>\n        <Credentials onSubmit={submit} />\n        {(user.loginError && !user.failAcknowledge) &&\n            <h3>Failed to Sign up </h3>\n        }\n        </div>\n    )\n}\n\nexport default Login\n","/Users/craigmacritchie/Software/blogPostGresQL/client/src/pages/NewArticle.js",["80"],"import React, { useEffect, useState} from 'react'\nimport axios from 'axios';\nimport { useDispatch } from 'react-redux'\nimport { postArticle, editArticle } from '../actions/blogActions'\nimport { useHistory } from \"react-router-dom\";\n\n\nconst ArticleForm = ({existingArticle, onSubmit }) => {\n    const [article, setArticle] = useState(existingArticle)\n    useEffect(() => {\n        console.log(\"useffect?\")\n        setArticle(existingArticle)\n    },[existingArticle])\n\n    const submit = e => {\n        e.preventDefault()\n        onSubmit(article)\n    }\n\n    const filechange = e => {\n        setArticle({ ...article, upload: e.target.files[0]})\n    }\n\n    return(\n        <form id=\"article-form\" className=\"article-form\" onSubmit={submit}>\n            <label htmlFor=\"article-title\">Title</label><br />\n            <input id=\"article-title\" value={article.title} onChange={e=>setArticle({...article, title: e.target.value })}></input><br />\n            <label htmlFor=\"article-content\">Content</label><br/>\n            <textarea id=\"article-content\" \n                value={article.content} \n                onChange={e=>setArticle({...article, content:e.target.value})} \n                rows=\"10\" cols=\"60\"/><br />\n            <input type=\"file\" onChange={e =>filechange(e)} /><br />\n            <button type=\"submit\" form=\"article-form\" value=\"Submit\">Submit</button>\n        </form>\n    )\n}\n\nArticleForm.defaultProps = {\n    existingArticle: {\n        title:'',\n        content:'',\n        imageUrl:null\n    }\n}\n\nconst ArticleWrapper = ({ match, }) => {\n    const history = useHistory();\n    const dispatch = useDispatch()\n    const [fetchedArticle, setFetchedArticle] = useState({ title:'', content:''})\n    \n    useEffect(() => {\n        const { params } = match\n\n        async function fetchArticle(articleId) {\n            const res = await axios.get(`/api/blogpost/${articleId}`)\n            setFetchedArticle(res.data);\n        }\n        if(Object.keys(params).includes('articleid')) {\n            fetchArticle(params.articleid)\n        }\n    },[])\n\n    const submitHandler = (article) => {\n        if(article.hasOwnProperty('id')) {\n            console.log(\"patch article \")\n            //need to fix this.\n            dispatch(editArticle(article, history))\n        }\n        else {\n            console.log(\"creat Article\")\n            dispatch(postArticle({...article }, history))\n        }\n    }\n\n    return <ArticleForm key='1' existingArticle={fetchedArticle} onSubmit={submitHandler} />\n}\n\n\nexport default ArticleWrapper","/Users/craigmacritchie/Software/blogPostGresQL/client/src/HOC/protectedRoute.js",[],"/Users/craigmacritchie/Software/blogPostGresQL/client/src/reducers/blogReducer.js",["81"],"import { BlogActionTypes } from '../actions/blogActions'\n\n\nconst initialState = {\n    articles: [],\n    loaded:false\n}\n\nexport default function(state = initialState, action) {\n    const { type, payload} = action;\n    switch(type) {\n        case BlogActionTypes.FETCH_ARTICLES:\n            return { ...state, articles: payload, loaded:true }\n        case BlogActionTypes.POST_ARTICLE:\n            return {...state, articles: [payload, ...state.articles]}\n        case BlogActionTypes.DELETE_ARTICLE:\n            return { ...state, articles: state.articles.filter(article => article.id !== payload)}\n        case BlogActionTypes.EDIT_ARTICLE:\n            return{ ...state, articles: state.articles.map(article => {\n                if(article.id === payload.id) {\n                    return payload\n                }\n                return article\n            })}\n        default:\n            return state\n    }\n}","/Users/craigmacritchie/Software/blogPostGresQL/client/src/reducers/userReducer.js",["82"],"import { UserActionTypes } from '../actions/userActions'\n\n\nconst initialState = {\n    loginError: false,\n    isAuthenticated: false,\n    userInfo:null,\n    failAcknowledge:true\n}\n\nexport default function(state = initialState, action) {\n    const { type, payload} = action;\n    switch(type) {\n        case UserActionTypes.LOGIN_SUCCESS:\n        case UserActionTypes.REGISETER_USER:\n            return { ...state, loginError: false, isAuthenticated: true, userInfo: { ...payload }}\n        case UserActionTypes.LOGIN_FAIL:\n            return { ...state, loginError: true, failAcknowledge:false }\n        case UserActionTypes.LOGOUT:\n            return { ...state, ...initialState }\n        case UserActionTypes.FAIL_ACKNOWLEDGE:\n            return { ...state, failAcknowledge: true }\n        default:\n            return state\n    }\n}","/Users/craigmacritchie/Software/blogPostGresQL/client/src/components/Credentials.js",[],["83","84"],"/Users/craigmacritchie/Software/blogPostGresQL/client/src/actions/blogActions.js",[],{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","replacedBy":"88"},{"ruleId":"89","severity":1,"message":"90","line":3,"column":22,"nodeType":"91","messageId":"92","endLine":3,"endColumn":28},{"ruleId":"89","severity":1,"message":"93","line":4,"column":8,"nodeType":"91","messageId":"92","endLine":4,"endColumn":14},{"ruleId":"89","severity":1,"message":"94","line":12,"column":8,"nodeType":"91","messageId":"92","endLine":12,"endColumn":22},{"ruleId":"95","severity":1,"message":"96","line":19,"column":7,"nodeType":"97","endLine":19,"endColumn":9,"suggestions":"98"},{"ruleId":"99","severity":1,"message":"100","line":25,"column":21,"nodeType":"101","endLine":25,"endColumn":65},{"ruleId":"95","severity":1,"message":"102","line":17,"column":7,"nodeType":"97","endLine":17,"endColumn":20,"suggestions":"103"},{"ruleId":"104","severity":1,"message":"105","line":53,"column":33,"nodeType":"101","endLine":53,"endColumn":128},{"ruleId":"89","severity":1,"message":"106","line":54,"column":15,"nodeType":"91","messageId":"92","endLine":54,"endColumn":18},{"ruleId":"95","severity":1,"message":"96","line":19,"column":7,"nodeType":"97","endLine":19,"endColumn":9,"suggestions":"107"},{"ruleId":"95","severity":1,"message":"108","line":62,"column":7,"nodeType":"97","endLine":62,"endColumn":9,"suggestions":"109"},{"ruleId":"110","severity":1,"message":"111","line":9,"column":1,"nodeType":"112","endLine":28,"endColumn":2},{"ruleId":"110","severity":1,"message":"111","line":11,"column":1,"nodeType":"112","endLine":26,"endColumn":2},{"ruleId":"85","replacedBy":"113"},{"ruleId":"87","replacedBy":"114"},"no-native-reassign",["115"],"no-negated-in-lhs",["116"],"no-unused-vars","'Router' is defined but never used.","Identifier","unusedVar","'Cookie' is defined but never used.","'protectedRoute' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'dispatch' and 'user.loginError'. Either include them or remove the dependency array.","ArrayExpression",["117"],"jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.",["118"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","'res' is assigned a value but never used.",["119"],"React Hook useEffect has a missing dependency: 'match'. Either include it or remove the dependency array.",["120"],"import/no-anonymous-default-export","Unexpected default export of anonymous function","ExportDefaultDeclaration",["115"],["116"],"no-global-assign","no-unsafe-negation",{"desc":"121","fix":"122"},{"desc":"123","fix":"124"},{"desc":"121","fix":"125"},{"desc":"126","fix":"127"},"Update the dependencies array to be: [dispatch, user.loginError]",{"range":"128","text":"129"},"Update the dependencies array to be: [blog.loaded, dispatch]",{"range":"130","text":"131"},{"range":"132","text":"129"},"Update the dependencies array to be: [match]",{"range":"133","text":"134"},[572,574],"[dispatch, user.loginError]",[489,502],"[blog.loaded, dispatch]",[569,571],[2053,2055],"[match]"]